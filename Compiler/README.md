## Author

Konrad Wolski (272382)

# Compiler Project

This project is a compiler for a custom programming language. It includes a lexer, parser, symbol table, and code generator.

## Project Structure

`compiler/`
| - `src/`
| | - `ast.hpp` : Abstract Syntax Tree definitions.
| | - `code_generator.hpp` : Code generation logic. (!error handling)
| | - `lexer.l` : Lexical analyzer definitions.
| | - `parser.y` : Parser definitions.
| | - `symbol_table.hpp` : Symbol table management.
| - `run.sh` : Script to compile or clean the project.
| - `____.imp` : Sample input program.
| - `_____.mr` : Sample output generated by the compiler.

## Dependencies

To run this project, you need to have the following tools installed:

```bash
sudo apt update
sudo apt install bison
sudo apt install flex
sudo apt install g++
```

## Usage

### Compiling the Project

To compile the project, run the following command:

```bash
  ./run.sh long *only for 'int ... long long' projects*
or
  ./run.sh cln *only for 'cln' projects*
```

### Cleaning the Project

To clean the project, run the following command:

```bash
./run.sh c
```

### Running the Compiler

To run the compiler on a sample input file and generate the output, use the following command:

```bash
./compiler <inputFileName>.imp <outputFileName>.mr  ***".imp" and ".mr" are added to names automatically!***
```

For example:

```bash
./compiler input output
```

## Sample Input

The `input.imp` file contains a sample program written in the custom language:

```
PROCEDURE gcd(a,b,c) IS
  x,y
BEGIN
  x:=a;
  y:=b;
  WHILE y>0 DO
    IF x>=y THEN
      x:=x-y;
    ELSE
      x:=x+y;
      y:=x+y;
      x:=x-y;
    ENDIF
  ENDWHILE
  c:=x;
END

PROGRAM IS
  a,b,c,d,x,y,z
BEGIN
  READ a;
  READ b;
  READ c;
  READ d;
  gcd(a,b,x);
  gcd(c,d,y);
  gcd(x,y,z);
  WRITE z;
END
```

## Sample Output

The `output.mr` file contains the output generated by the compiler for the sample input:

```
JUMP 41
LOADI 4
STORE 7
LOADI 5
STORE 8
SET 0
STORE 16
LOAD 8
SUB 16
JPOS 2
JUMP 28
LOAD 8
STORE 17
LOAD 7
SUB 17
JNEG 7
LOAD 8
STORE 18
LOAD 7
SUB 18
STORE 7
JUMP 16
LOAD 8
STORE 19
LOAD 7
ADD 19
STORE 7
LOAD 8
STORE 20
LOAD 7
ADD 20
STORE 8
LOAD 8
STORE 21
LOAD 7
SUB 21
STORE 7
JUMP -32
LOAD 7
STOREI 6
RTRN 3
GET 0
STORE 9
GET 0
STORE 10
GET 0
STORE 11
GET 0
STORE 12
SET 9
STORE 4
SET 10
STORE 5
SET 13
STORE 6
SET 58
STORE 3
JUMP -56
SET 11
STORE 4
SET 12
STORE 5
SET 14
STORE 6
SET 67
STORE 3
JUMP -65
SET 13
STORE 4
SET 14
STORE 5
SET 15
STORE 6
SET 76
STORE 3
JUMP -74
LOAD 15
PUT 0
HALT
```
